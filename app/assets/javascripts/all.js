/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var l={};var g={};l.config=window.forge.config;g.listeners={};var c={};var f=[];var e=null;var k=false;var m=function(){if(f.length>0){if(!g.debug||window.catalystConnected){k=true;while(f.length>0){var n=f.shift();if(n[0]=="logging.log"){console.log(n[1].message)}g.priv.call.apply(g.priv,n)}k=false}else{e=setTimeout(m,500)}}};g.priv={call:function(u,t,s,o){if((!g.debug||window.catalystConnected||u==="internal.showDebugWarning")&&(f.length==0||k)){var n=l.tools.UUID();var q=true;if(u==="button.onClicked.addListener"||u==="message.toFocussed"){q=false}if(s||o){c[n]={success:s,error:o,onetime:q}}var p={callid:n,method:u,params:t};g.priv.send(p);if(window._forgeDebug){try{p.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(p)}catch(r){}}}else{f.push(arguments);if(!e){e=setTimeout(m,500)}}},send:function(n){throw new Error("Forge error: missing bridge to privileged code")},receive:function(n){if(n.callid){if(typeof c[n.callid]===undefined){l.log("Nothing stored for call ID: "+n.callid)}var p=c[n.callid];var o=(typeof n.content==="undefined"?null:n.content);if(p&&p[n.status]){p[n.status](n.content)}if(p&&p.onetime){delete c[n.callid]}if(window._forgeDebug){try{n.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(n)}catch(q){}}}else{if(n.event){if(g.listeners[n.event]){g.listeners[n.event].forEach(function(r){if(n.params){r(n.params)}else{r()}})}if(g.listeners["*"]){g.listeners["*"].forEach(function(r){if(n.params){r(n.event,n.params)}else{r(n.event)}})}if(window._forgeDebug){try{n.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(n)}catch(q){}}}}}};g.addEventListener=function(n,o){if(g.listeners[n]){g.listeners[n].push(o)}else{g.listeners[n]=[o]}};g.generateQueryString=function(o){if(!o){return""}if(!(o instanceof Object)){return new String(o).toString()}var p=[];var n=function(u,t){if(u===null){return}else{if(u instanceof Array){var r=0;for(var q in u){var s=(t?t:"")+"["+r+"]";r+=1;if(!u.hasOwnProperty(q)){continue}n(u[q],s)}}else{if(u instanceof Object){for(var q in u){if(!u.hasOwnProperty(q)){continue}var s=q;if(t){s=t+"["+q+"]"}n(u[q],s)}}else{p.push(encodeURIComponent(t)+"="+encodeURIComponent(u))}}}};n(o);return p.join("&").replace("%20","+")};g.generateMultipartString=function(o,q){if(typeof o==="string"){return""}var p="";for(var n in o){if(!o.hasOwnProperty(n)){continue}if(o[n]===null){continue}p+="--"+q+"\r\n";p+='Content-Disposition: form-data; name="'+n.replace('"','\\"')+'"\r\n\r\n';p+=o[n].toString()+"\r\n"}return p};g.generateURI=function(o,n){var p="";if(o.indexOf("?")!==-1){p+=o.split("?")[1]+"&";o=o.split("?")[0]}p+=this.generateQueryString(n)+"&";p=p.substring(0,p.length-1);return o+(p?"?"+p:"")};g.disabledModule=function(n,o){var p="The '"+o+"' module is disabled for this app, enable it in your app config and rebuild in order to use this function";l.logging.error(p);n&&n({message:p,type:"UNAVAILABLE",subtype:"DISABLED_MODULE"})};l.enableDebug=function(){g.debug=true;g.priv.call("internal.showDebugWarning",{},null,null);g.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge&&window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);l.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};l.is["mobile"]=function(){return true};l.is["android"]=function(){return true};l.is["orientation"]["portrait"]=function(){return g.currentOrientation=="portrait"};l.is["orientation"]["landscape"]=function(){return g.currentOrientation=="landscape"};l.is["connection"]["connected"]=function(){return g.currentConnectionState.connected};l.is["connection"]["wifi"]=function(){return g.currentConnectionState.wifi};var d=function(t,r,u){var p=[];stylize=function(w,v){return w};function n(v){return v instanceof RegExp||(typeof v==="object"&&Object.prototype.toString.call(v)==="[object RegExp]")}function o(v){return v instanceof Array||Array.isArray(v)||(v&&v!==Object.prototype&&o(v.__proto__))}function q(x){if(x instanceof Date){return true}if(typeof x!=="object"){return false}var v=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var w=x.__proto__&&Object.getOwnPropertyNames(x.__proto__);return JSON.stringify(w)===JSON.stringify(v)}function s(H,E){try{if(H&&typeof H.inspect==="function"&&!(H.constructor&&H.constructor.prototype===H)){return H.inspect(E)}switch(typeof H){case"undefined":return stylize("undefined","undefined");case"string":var v="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(v,"string");case"number":return stylize(""+H,"number");case"boolean":return stylize(""+H,"boolean")}if(H===null){return stylize("null","null")}if(H instanceof Document){return(new XMLSerializer()).serializeToString(H)}var B=Object.keys(H);var I=r?Object.getOwnPropertyNames(H):B;if(typeof H==="function"&&I.length===0){var w=H.name?": "+H.name:"";return stylize("[Function"+w+"]","special")}if(n(H)&&I.length===0){return stylize(""+H,"regexp")}if(q(H)&&I.length===0){return stylize(H.toUTCString(),"date")}var x,F,C;if(o(H)){F="Array";C=["[","]"]}else{F="Object";C=["{","}"]}if(typeof H==="function"){var A=H.name?": "+H.name:"";x=" [Function"+A+"]"}else{x=""}if(n(H)){x=" "+H}if(q(H)){x=" "+H.toUTCString()}if(I.length===0){return C[0]+x+C[1]}if(E<0){if(n(H)){return stylize(""+H,"regexp")}else{return stylize("[Object]","special")}}p.push(H);var z=I.map(function(K){var J,L;if(H.__lookupGetter__){if(H.__lookupGetter__(K)){if(H.__lookupSetter__(K)){L=stylize("[Getter/Setter]","special")}else{L=stylize("[Getter]","special")}}else{if(H.__lookupSetter__(K)){L=stylize("[Setter]","special")}}}if(B.indexOf(K)<0){J="["+K+"]"}if(!L){if(p.indexOf(H[K])<0){if(E===null){L=s(H[K])}else{L=s(H[K],E-1)}if(L.indexOf("\n")>-1){if(o(H)){L=L.split("\n").map(function(M){return"  "+M}).join("\n").substr(2)}else{L="\n"+L.split("\n").map(function(M){return"   "+M}).join("\n")}}}else{L=stylize("[Circular]","special")}}if(typeof J==="undefined"){if(F==="Array"&&K.match(/^\d+$/)){return L}J=JSON.stringify(""+K);if(J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){J=J.substr(1,J.length-2);J=stylize(J,"name")}else{J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");J=stylize(J,"string")}}return J+": "+L});p.pop();var G=0;var y=z.reduce(function(J,K){G++;if(K.indexOf("\n")>=0){G++}return J+K.length+1},0);if(y>50){z=C[0]+(x===""?"":x+"\n ")+" "+z.join(",\n  ")+" "+C[1]}else{z=C[0]+x+" "+z.join(", ")+" "+C[1]}return z}catch(D){return"[No string representation]"}}return s(t,(typeof u==="undefined"?2:u))};var h=function(o,p){if("logging" in l.config){var n=l.config.logging.marker||"FORGE"}else{var n="FORGE"}o="["+n+"] "+(o.indexOf("\n")===-1?"":"\n")+o;g.priv.call("logging.log",{message:o,level:p});if(typeof console!=="undefined"){switch(p){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(o)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(o)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(o)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(o)}break}}};var a=function(n,o){if(n in l.logging.LEVELS){return l.logging.LEVELS[n]}else{l.logging.__logMessage("Unknown configured logging level: "+n);return o}};var b=function(o){var r=function(s){if(s.message){return s.message}else{if(s.description){return s.description}else{return""+s}}};if(o){var q="\nError: "+r(o);try{if(o.lineNumber){q+=" on line number "+o.lineNumber}if(o.fileName){var n=o.fileName;q+=" in file "+n.substr(n.lastIndexOf("/")+1)}}catch(p){}if(o.stack){q+="\r\nStack trace:\r\n"+o.stack}return q}return""};l.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(o,n){l.logging.log(o,n,l.logging.LEVELS.DEBUG)},info:function(o,n){l.logging.log(o,n,l.logging.LEVELS.INFO)},warning:function(o,n){l.logging.log(o,n,l.logging.LEVELS.WARNING)},error:function(o,n){l.logging.log(o,n,l.logging.LEVELS.ERROR)},critical:function(o,n){l.logging.log(o,n,l.logging.LEVELS.CRITICAL)},log:function(o,n,r){if(typeof(r)==="undefined"){var r=l.logging.LEVELS.INFO}try{var p=a(l.config.logging.level,l.logging.LEVELS.ALL)}catch(q){var p=l.logging.LEVELS.ALL}if(r>=p){h(d(o,false,10)+b(n),r)}}};l.internal={ping:function(o,p,n){g.priv.call("internal.ping",{data:[o]},p,n)},call:g.priv.call,addEventListener:g.addEventListener};var j={};g.currentOrientation=j;g.currentConnectionState=j;g.addEventListener("internal.orientationChange",function(n){if(g.currentOrientation!=n.orientation){g.currentOrientation=n.orientation;g.priv.receive({event:"event.orientationChange"})}});g.addEventListener("internal.connectionStateChange",function(n){if(n.connected!=g.currentConnectionState.connected||n.wifi!=g.currentConnectionState.wifi){g.currentConnectionState=n;g.priv.receive({event:"event.connectionStateChange"})}});l.event={menuPressed:{addListener:function(o,n){g.addEventListener("event.menuPressed",o)}},backPressed:{addListener:function(o,n){g.addEventListener("event.backPressed",function(){o(function(){g.priv.call("event.backPressed_closeApplication",{})})})},preventDefault:function(o,n){g.priv.call("event.backPressed_preventDefault",{},o,n)}},messagePushed:{addListener:function(o,n){g.addEventListener("event.messagePushed",o)}},orientationChange:{addListener:function(o,n){g.addEventListener("event.orientationChange",o);if(j&&g.currentOrientation!==j){g.priv.receive({event:"event.orientationChange"})}}},connectionStateChange:{addListener:function(o,n){g.addEventListener("event.connectionStateChange",o);if(j&&g.currentConnectionState!==j){g.priv.receive({event:"event.connectionStateChange"})}}},appPaused:{addListener:function(o,n){g.addEventListener("event.appPaused",o)}},appResumed:{addListener:function(o,n){g.addEventListener("event.appResumed",o)}}};l.reload={updateAvailable:function(o,n){g.priv.call("reload.updateAvailable",{},o,n)},update:function(o,n){g.priv.call("reload.update",{},o,n)},pauseUpdate:function(o,n){g.priv.call("reload.pauseUpdate",{},o,n)},applyNow:function(o,n){l.logging.error("reload.applyNow has been disabled, please see docs.trigger.io for more information.");n({message:"reload.applyNow has been disabled, please see docs.trigger.io for more information.",type:"UNAVAILABLE"})},switchStream:function(o,p,n){g.priv.call("reload.switchStream",{streamid:o},p,n)},updateReady:{addListener:function(o,n){g.addEventListener("reload.updateReady",o)}},updateProgress:{addListener:function(o,n){g.addEventListener("reload.updateProgress",o)}}};l.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var o=Math.random()*16|0;var n=p=="x"?o:(o&3|8);return n.toString(16)}).toUpperCase()},getURL:function(o,p,n){g.priv.call("tools.getURL",{name:o.toString()},p,n)}};g.priv.send=function(o){if(window.__forge["callJavaFromJavaScript"]===undefined){return}var n=((o.params!==undefined)?JSON.stringify(o.params):"");window.__forge["callJavaFromJavaScript"](o.callid,o.method,n)};g.priv.send({callid:"ready",method:""});l._receive=g.priv.receive;window.forge=l})();(function(){forge.tabbar={show:function(b,a){forge.internal.call("tabbar.show",{},b,a)},hide:function(b,a){forge.internal.call("tabbar.hide",{},b,a)},addButton:function(c,b,a){if(c.icon&&c.icon[0]==="/"){c.icon=c.icon.substr(1)}forge.internal.call("tabbar.addButton",c,function(d){b&&b({remove:function(f,e){forge.internal.call("tabbar.removeButton",{id:d},f,e)},setActive:function(f,e){forge.internal.call("tabbar.setActive",{id:d},f,e)},onPressed:{addListener:function(f,e){forge.internal.addEventListener("tabbar.buttonPressed."+d,f)}}})},a)},removeButtons:function(b,a){forge.internal.call("tabbar.removeButtons",{},b,a)},setTint:function(a,c,b){forge.internal.call("tabbar.setTint",{color:a},c,b)},setActiveTint:function(a,c,b){forge.internal.call("tabbar.setActiveTint",{color:a},c,b)},setInactive:function(b,a){forge.internal.call("tabbar.setInactive",{},b,a)}}})();(function(){var a=function(f){if(f=="<all_urls>"){f="*://*"}f=f.split("://");var b=f[0];var d,e;if(f[1].indexOf("/")===-1){d=f[1];e=""}else{d=f[1].substring(0,f[1].indexOf("/"));e=f[1].substring(f[1].indexOf("/"))}var c="";if(b=="*"){c+=".*://"}else{c+=b+"://"}if(d=="*"){c+=".*"}else{if(d.indexOf("*.")===0){c+="(.+\\.)?"+d.substring(2)}else{c+=d}}c+=e.replace(/\*/g,".*");return"^"+c+"$"};forge.tabs={open:function(c,d,e,b){if(typeof d==="function"){b=e;e=d;d=false}forge.internal.call("tabs.open",{url:c,keepFocus:d},e,b)},openWithOptions:function(c,e,b){var d;if(c.pattern){c.pattern=a(c.pattern)}forge.internal.call("tabs.open",c,e,b)},closeCurrent:function(b){b=arguments[1]||b;var c=forge.tools.UUID();location.hash=c;forge.internal.call("tabs.closeCurrent",{hash:c},null,b)}}})();(function(){forge.media={videoPlay:function(b,c,a){if(!b.uri){b={uri:b}}forge.internal.call("media.videoPlay",b,c,a)},createAudioPlayer:function(b,c,a){forge.internal.call("media.createAudioPlayer",{file:b},function(d){c({play:function(f,e){forge.internal.call("media.audioPlayerPlay",{player:d},f,e)},pause:function(f,e){forge.internal.call("media.audioPlayerPause",{player:d},f,e)},stop:function(f,e){forge.internal.call("media.audioPlayerStop",{player:d},f,e)},destroy:function(f,e){forge.internal.call("media.audioPlayerDestroy",{player:d},f,e)},seek:function(f,g,e){forge.internal.call("media.audioPlayerSeek",{player:d,seekTo:f},g,e)},duration:function(f,e){forge.internal.call("media.audioPlayerDuration",{player:d},f,e)}})},a)}}})();(function(){forge.topbar={show:function(b,a){forge.internal.call("topbar.show",{},b,a)},hide:function(b,a){forge.internal.call("topbar.hide",{},b,a)},setTitle:function(c,b,a){forge.internal.call("topbar.setTitle",{title:c},b,a)},setTitleImage:function(b,c,a){if(b&&b[0]==="/"){b=b.substr(1)}forge.internal.call("topbar.setTitleImage",{icon:b},c,a)},setTint:function(a,c,b){forge.internal.call("topbar.setTint",{color:a},c,b)},addButton:function(b,c,a){if(b.icon&&b.icon[0]==="/"){b.icon=b.icon.substr(1)}forge.internal.call("topbar.addButton",b,function(d){c&&forge.internal.addEventListener("topbar.buttonPressed."+d,c)},a)},removeButtons:function(b,a){forge.internal.call("topbar.removeButtons",{},b,a)},homePressed:{addListener:function(b,a){forge.internal.addEventListener("topbar.homePressed",b)}}}})();(function(){forge.request={get:function(e,f,d){forge.request.ajax({url:e,dataType:"text",success:f&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(g){}f.apply(this,arguments)},error:d})}};var b=function(e){if(!e){return""}if(!(e instanceof Object)){return new String(e).toString()}var f=[];var d=function(n,m){if(n===null){return}else{if(n instanceof Array){var j=0;for(var g in n){var k=(m?m:"")+"["+j+"]";j+=1;if(!n.hasOwnProperty(g)){continue}d(n[g],k)}}else{if(n instanceof Object){for(var h in n){if(!n.hasOwnProperty(h)){continue}var l=h;if(m){l=m+"["+h+"]"}d(n[h],l)}}else{f.push(encodeURIComponent(m)+"="+encodeURIComponent(n))}}}};d(e);return f.join("&").replace("%20","+")};var a=function(e,d){var f="";if(e.indexOf("?")!==-1){f+=e.split("?")[1]+"&";e=e.split("?")[0]}f+=b(d)+"&";f=f.substring(0,f.length-1);return e+(f?"?"+f:"")};var c=function(e,g){if(typeof e==="string"){return""}var f="";for(var d in e){if(!e.hasOwnProperty(d)){continue}if(e[d]===null){continue}f+="--"+g+"\r\n";f+='Content-Disposition: form-data; name="'+d.replace('"','\\"')+'"\r\n\r\n';f+=e[d].toString()+"\r\n"}return f};forge.request["ajax"]=function(g){var l=(g.files?g.files:null);var u=(g.fileUploadMethod?g.fileUploadMethod:"multipart");var k=(g.url?g.url:null);var m=(g.success?g.success:undefined);var t=(g.error?g.error:undefined);var j=(g.username?g.username:null);var d=(g.password?g.password:null);var y=(g.accepts?g.accepts:["*/*"]);var q=(g.cache?g.cache:false);var w=(g.contentType?g.contentType:null);var z=(g.data?g.data:null);var s=(g.dataType?g.dataType:null);var f=(g.headers?g.headers:{});var n=(g.timeout?g.timeout:60000);var h=(g.type?g.type:"GET");if(typeof y==="string"){y=[y]}var v=null;if(l){h="POST";if(u=="multipart"){v=forge.tools.UUID().replace(/-/g,"");z=c(z,v);w="multipart/form-data; boundary="+v}else{if(u=="raw"){if(l.length>1){forge.logging.warning("Only one file can be uploaded at once with type 'raw'");l=[l[0]]}z=null;w="image/jpg"}}}else{if(h=="GET"){k=a(k,z);z=null}else{if(z){z=b(z);if(!w){w="application/x-www-form-urlencoded"}}}}if(q){q={};q["wm"+Math.random()]=Math.random();k=a(k,q)}if(y){f.Accept=y.join(",")}if(w){f["Content-Type"]=w}var r={};if(window._forgeDebug){try{r.id=forge.tools.UUID();r.fromUrl=window.location.href;r.reqTime=(new Date()).getTime()/1000;r.method=h;r.data=z;r.url=k;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(r.id,r.url,{url:r.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(r.id,r.reqTime,{url:r.url,httpMethod:r.method,httpHeaderFields:{},requestFormData:r.data},{isNull:true})}catch(x){}}var p=false;var o=setTimeout(function(){if(p){return}p=true;if(window._forgeDebug){try{r.respTime=(new Date()).getTime()/1000;r.respText=z;_forgeDebug.wi.NetworkNotify.didReceiveResponse(r.id,r.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(r.id,r.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(r.id,r.respTime)}catch(A){}}t&&t({message:"Request timed out",type:"EXPECTED_FAILURE"})},n);forge.internal.call("request.ajax",{url:k,username:j,password:d,data:z,headers:f,timeout:n,type:h,boundary:v,files:l,fileUploadMethod:u},function(C){clearTimeout(o);if(p){return}p=true;if(window._forgeDebug){try{r.respTime=(new Date()).getTime()/1000;r.respText=C;_forgeDebug.wi.NetworkNotify.didReceiveResponse(r.id,r.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(r.id,r.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(r.id,r.respTime)}catch(D){}}try{if(s=="xml"){var B,A;if(window.DOMParser){B=new DOMParser();A=B.parseFromString(C,"text/xml")}else{A=new ActiveXObject("Microsoft.XMLDOM");A.async="false";A.loadXML(C)}C=A}else{if(s=="json"){C=JSON.parse(C)}}}catch(D){}m&&m(C)},function(){clearTimeout(o);if(p){return}p=true;if(window._forgeDebug){try{r.respTime=(new Date()).getTime()/1000;r.respText=z;_forgeDebug.wi.NetworkNotify.didReceiveResponse(r.id,r.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(r.id,r.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(r.id,r.respTime)}catch(A){}}t&&t.apply(this,arguments)})}})();(function(){var a={};var b=forge.event.messagePushed;a.push={subscribe:function(d,e,c){forge.internal.call("parse.push_subscribe",{channel:d},e,c)},unsubscribe:function(d,e,c){forge.internal.call("parse.push_unsubscribe",{channel:d},e,c)},subscribedChannels:function(d,c){forge.internal.call("parse.push_subscribedChannels",{},d,c)},messagePushed:{addListener:function(d,c){b.addListener(d,c);forge.internal.call("parse.push_messagePushed",{})}}};forge.partners=forge;forge.parse={installationInfo:function(d,c){forge.internal.call("parse.installationInfo",{},d,c)},push:{subscribe:a.push.subscribe,unsubscribe:a.push.unsubscribe,subscribedChannels:a.push.subscribedChannels}};forge.event["messagePushed"]=a.push.messagePushed})();(function(){forge.prefs={get:function(b,c,a){forge.internal.call("prefs.get",{key:b.toString()},c&&function(d){if(d==="undefined"){d=undefined}else{try{d=JSON.parse(d)}catch(f){a({message:f.toString()});return}}c(d)},a)},set:function(b,c,d,a){if(c===undefined){c="undefined"}else{c=JSON.stringify(c)}forge.internal.call("prefs.set",{key:b.toString(),value:c},d,a)},keys:function(b,a){forge.internal.call("prefs.keys",{},b,a)},all:function(b,a){var b=b&&function(c){for(key in c){if(c[key]==="undefined"){c[key]=undefined}else{c[key]=JSON.parse(c[key])}}b(c)};forge.internal.call("prefs.all",{},b,a)},clear:function(b,c,a){forge.internal.call("prefs.clear",{key:b.toString()},c,a)},clearAll:function(b,a){forge.internal.call("prefs.clearAll",{},b,a)}}})();(function(){forge.contact={select:function(b,a){forge.internal.call("contact.select",{},b,a)},selectById:function(c,b,a){forge.internal.call("contact.selectById",{id:c},b,a)},selectAll:function(b,a){forge.internal.call("contact.selectAll",{},b,a)}}})();(function(){if(!forge.is.android()){forge.ui={enhanceInput:function(a,d,b){var c="forge.ui.enhanceInput is only available on Android.";forge.logging.warning(c);d&&d()},enhanceAllInputs:function(c,a){var b="forge.ui.enhanceAllInputs is only available on Android.";forge.logging.warning(b);c&&c()}}}else{forge.ui={enhanceInput:function(a,f,c){var e=function(g){var h=document.createEvent("HTMLEvents");h.initEvent("blur",true,true);g.dispatchEvent(h)};var d=function(g){if(g.getAttribute("data-forge-fixed")!="yes"&&(g.type=="date"||g.type=="datetime"||g.type=="time"||g.type=="datetime-local")){g.disabled=true;g.addEventListener("touchend",function(){if(g.type=="date"){forge.internal.call("ui.datePicker",{value:g.value||""},function(h){g.value=h.year+"-"+h.month+"-"+h.day;e(g)})}else{if(g.type=="datetime"||g.type=="datetime-local"){forge.internal.call("ui.datePicker",{value:g.value||""},function(h){forge.internal.call("ui.timePicker",{value:g.value||""},function(j){dateTime=h.year+"-"+h.month+"-"+h.day+"T"+j.hour+":"+j.minute;if(g.type=="datetime"){forge.internal.call("ui.dateTimeToUTC",{local:dateTime},function(k){g.value=k;e(g)})}else{if(g.type=="datetime-local"){g.value=dateTime;e(g)}}})})}else{if(g.type=="time"){forge.internal.call("ui.timePicker",{value:g.value||""},function(h){g.value=h.hour+":"+h.minute;e(g)})}}}},false);g.setAttribute("data-forge-fixed","yes")}};var b=document.querySelectorAll(a);for(i=0;i<b.length;i++){d(b[i])}f&&f()},enhanceAllInputs:function(b,a){forge.ui["enhanceInput"]('input[type="date"]');forge.ui["enhanceInput"]('input[type="datetime"]');forge.ui["enhanceInput"]('input[type="datetime-local"]');forge.ui["enhanceInput"]('input[type="time"]');b&&b()}}}})();(function(){forge.file={getImage:function(b,c,a){if(typeof b==="function"){a=c;c=b;b={}}if(!b){b={}}forge.internal.call("file.getImage",b,c&&function(e){var d={uri:e,name:"Image",type:"image"};if(b.width){d.width=b.width}if(b.height){d.height=b.height}c(d)},a)},getVideo:function(b,c,a){if(typeof b==="function"){a=c;c=b;b={}}if(!b){b={}}forge.internal.call("file.getVideo",b,c&&function(e){var d={uri:e,name:"Video",type:"video"};c(d)},a)},getLocal:function(b,c,a){forge.internal.call("file.getLocal",{name:b},c,a)},base64:function(b,c,a){forge.internal.call("file.base64",b,c,a)},string:function(b,c,a){forge.internal.call("file.string",b,c,a)},URL:function(c,d,e,b){if(typeof d==="function"){b=e;e=d}var a={};for(prop in c){a[prop]=c[prop]}a.height=d.height||c.height||undefined;a.width=d.width||c.width||undefined;forge.internal.call("file.URL",a,e,b)},isFile:function(b,c,a){if(!b||!("uri" in b)){c(false)}else{forge.internal.call("file.isFile",b,c,a)}},cacheURL:function(b,c,a){forge.internal.call("file.cacheURL",{url:b},c&&function(d){c({uri:d})},a)},saveURL:function(b,c,a){forge.internal.call("file.saveURL",{url:b},c&&function(d){c({uri:d})},a)},remove:function(b,c,a){forge.internal.call("file.remove",b,c,a)},clearCache:function(b,a){forge.internal.call("file.clearCache",{},b,a)}}})();
(function () {
  forge.tabbar = {
    show: function (b, a) {
      forge.internal.call("tabbar.show", {}, b, a)
    },
    hide: function (b, a) {
      forge.internal.call("tabbar.hide", {}, b, a)
    },
    addButton: function (c, b, a) {
      if (c.icon && c.icon[0] === "/") {
        c.icon = c.icon.substr(1)
      }
      forge.internal.call("tabbar.addButton", c, function (d) {
        b && b({
          remove: function (f, e) {
            forge.internal.call("tabbar.removeButton", {
              id: d
            }, f, e)
          },
          setActive: function (f, e) {
            forge.internal.call("tabbar.setActive", {
              id: d
            }, f, e)
          },
          onPressed: {
            addListener: function (f, e) {
              forge.internal.addEventListener("tabbar.buttonPressed." + d, f)
            }
          }
        })
      }, a)
    },
    removeButtons: function (b, a) {
      forge.internal.call("tabbar.removeButtons", {}, b, a)
    },
    setTint: function (a, c, b) {
      forge.internal.call("tabbar.setTint", {
        color: a
      }, c, b)
    },
    setActiveTint: function (a, c, b) {
      forge.internal.call("tabbar.setActiveTint", {
        color: a
      }, c, b)
    },
    setInactive: function (b, a) {
      forge.internal.call("tabbar.setInactive", {}, b, a)
    }
  }
})();